<!DOCTYPE html>
<html lang="en"><head>
<script src="L19-pca_files/libs/clipboard/clipboard.min.js"></script>
<script src="L19-pca_files/libs/quarto-html/tabby.min.js"></script>
<script src="L19-pca_files/libs/quarto-html/popper.min.js"></script>
<script src="L19-pca_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="L19-pca_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="L19-pca_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="L19-pca_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="L19-pca_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.555">

  <title>l19-pca</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="L19-pca_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="L19-pca_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="L19-pca_files/libs/revealjs/dist/theme/quarto.css">
  <link href="L19-pca_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="L19-pca_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="L19-pca_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="L19-pca_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="L19-pca_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="L19-pca_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section>
<section id="principal-component-analysis" class="title-slide slide level1 center">
<h1>Principal component analysis</h1>
<!-- don't overwrite the notes doc! The exercise sections are different -->
<!-- NOTE: reading references rape, assault, etc :/ -->
<!-- > **READING**     -->
<!-- > For more on this topic, you can read [ISLR](https://drive.google.com/file/d/106d-rN7cXpyAkgrUqjcPONNCyO-rX7MQ/view) chapter 12.2. HOWEVER, please note that this section follows a sensitive application related to crime statistics. -->
<!-- pca vs factor analysis: pcs might not map onto any meaningful factor (eg: intelligence) -->
<!-- we can get back the original X after applying rotation -->
<!-- weather_data == 

head(as.matrix(weather_data) %*% as.matrix(pca_small$rotation)) -->
<!-- squared loadings sum to 1.  o.w. we could arbitrarily increase the loadings and blow up the variance -->
<!-- https://towardsdatascience.com/eigen-intuitions-understanding-eigenvectors-and-eigenvalues-630e9ef1f719#:~:text=The%20eigenvectors%20of%20a%20linear,scaled%20by%20under%20the%20transform. -->
<!-- http://www.sthda.com/english/articles/31-principal-component-methods-in-r-practical-guide/118-principal-component-analysis-in-r-prcomp-vs-princomp/ -->
<!-- plot(ratings) -->
<!-- scores <- prcomp(ratings, scale = FALSE)$x -->
<!-- pairs(scores) -->
<!-- cor(prcomp(ratings, scale = FALSE)$x) -->
<!-- data.frame(prcomp(ratings, scale = FALSE)$x) %>%  -->
<!--   summarize(mean(PC1^2), mean(PC2^2), mean(PC3^2)) -->
<!-- ggplot(data.frame(scores), aes(x = PC1, y = PC2)) +  -->
<!--   geom_point() + -->
<!--   theme(text = element_text(size = 16)) -->
<p><br>
</p>
</section>
<section id="context" class="slide level2 unnumbered">
<h2>Context</h2>
<center>
<img src="images/MLDiagram6.jpg">
</center>
<p><strong>CONTEXT</strong></p>
<p>In <strong>unsupervised learning</strong> we don’t have any y outcome variable, we’re just exploring the structure of our data. This can be divided into 2 types of tasks:</p>
<ul>
<li><strong>clustering</strong>
<ul>
<li>GOAL: examine structure &amp; similarities among the individual observations (rows) of our dataset</li>
<li>METHODS: hierarchical and K-means clustering</li>
</ul></li>
<li><strong>dimension reduction</strong>
<ul>
<li>GOAL: examine &amp; simplify structure among the features (columns) of our dataset</li>
<li>METHODS: principal components analysis (and many others, including singular value decomposition (SVD), Uniform Manifold Approximation and Projection (UMAP))</li>
</ul></li>
</ul>
<p><br>
<br>
<br>
<br>
</p>
<p><strong>DIMENSION REDUCTION MOTIVATION</strong></p>
<p>Especially when we have a <em>lot</em> of features, dimension reduction helps:</p>
<ul>
<li>identify patterns among the features</li>
<li>conserve computational resources</li>
<li><strong>feature engineering</strong>: create salient features to use in regression &amp; classification (will discuss next class)</li>
</ul>
<p><br>
<br>
<br>
<br>
</p>
<p><strong>PRINCIPAL COMPONENT ANALYSIS (PCA)</strong></p>
<p><img data-src="images/pca_flow.png"></p>
<p><br>
<br>
<br>
<br>
</p>
<p><strong>INSPIRATION</strong></p>
<p>PCA is pretty cool.</p>
<p>Check out this article <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2735096/">“Genes mirror geography in Europe”</a> which examined more than 500,000 DNA sites on 3,000 Europeans.</p>
<p>Thus we have high dimensional data with 3,000 rows (n) and 500,000 columns (p), thus p &gt; n. We can capture much of the geographic relationship by reducing these 500,000 features to just 2 principal components!</p>
<p><img data-src="images/pca_geography.png"></p>
<p><br>
<br>
<br>
<br>
</p>
</section>
<section id="notes-principal-component-analysis" class="slide level2 unnumbered">
<h2>Notes: Principal Component Analysis</h2>
<p>The section here provides a general overview of the PCA algorithm.</p>
<p>The details require linear algebra, which is not a pre-req for this course.</p>
<p>If you’re curious, more details are provided in the Deeper Learning section below.</p>
<p><br></p>
<p><strong>PRINCIPAL COMPONENT ANALYSIS</strong></p>
<p>Suppose we start with high dimensional data with p <em>correlated</em> features: <span class="math inline">\(x_1\)</span>, <span class="math inline">\(x_2\)</span>, …, <span class="math inline">\(x_p\)</span>.</p>
<p>We want to turn these into a <em>smaller</em> set of k &lt; p features or <em>principal components</em> <span class="math inline">\(PC_1\)</span>, <span class="math inline">\(PC_2\)</span>, …., <span class="math inline">\(PC_k\)</span> that:</p>
<ul>
<li>are <em>uncorrelated</em> (i.e.&nbsp;each contain <em>unique</em> information)</li>
<li>preserve the majority of information or variability in the original data</li>
</ul>
<p><strong>Step 1</strong><br>
Define the p principal components as <strong>linear combinations</strong> of the original x features. These combinations are specified by <strong>loadings</strong> or coefficients a:</p>
<p><span class="math display">\[\begin{split}
PC_1 &amp; = a_{11} x_1 + a_{12} x_2 + \cdots + a_{1p} x_p \\
PC_2 &amp; = a_{21} x_1 + a_{22} x_2 + \cdots + a_{2p} x_p \\
\vdots &amp; \\
PC_p &amp; = a_{p1} x_1 + a_{p2} x_2 + \cdots + a_{pp} x_p \\
\end{split}\]</span></p>
<p>The <strong>first PC</strong> <span class="math inline">\(PC_1\)</span> is the direction of maximal variability – it retains the greatest variability or information in the original data.</p>
<p>The subsequent PCs are defined to have maximal variation among the directions orthogonal to / perpendicular to / uncorrelated with the previously constructed PCs.</p>
<p><br>
</p>
<p><strong>Step 2</strong></p>
<p>Keep only the subset of PCs which retain “enough” of the variability / information in the original dataset.</p>
<p><br>
<br>
<br>
<br>
</p>
</section>
<section id="small-group-discussion" class="slide level2 unnumbered scrollable">
<h2>Small Group Discussion</h2>
<p>Recall the Australian weather data from Homework 2 (image: http://toursmaps.com/wp-content/uploads/2017/09/australia-map-google-_0.jpg):</p>
<p><img data-src="images/australia-map.jpg"></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>         Date      Location       MinTemp       MaxTemp      Rainfall 
            0             0          3285          3085          5930 
  Evaporation      Sunshine   WindGustDir WindGustSpeed    WindDir9am 
       109530        118202         15766         15659         16135 
   WindDir3pm  WindSpeed9am  WindSpeed3pm   Humidity9am   Humidity3pm 
         8668          3842          7254          4351          8329 
  Pressure9am   Pressure3pm      Cloud9am      Cloud3pm       Temp9am 
        23000         22981         89076         95092          3310 
      Temp3pm     RainToday       RISK_MM  RainTomorrow 
         7310          5930          5929          5929 </code></pre>
</div>
</div>
<p>PCA cannot handle missing values.</p>
<p>We <em>could</em> simply eliminate days with any missing values, but this would kick out a lot of useful info.</p>
<p>Instead, we’ll use KNN to <em>impute</em> the missing values using the <code>VIM</code> package.</p>
<p>If your VIM package doesn’t work, import the processed data from here:</p>
<p><br>
<br>
</p>
<p><strong>EXAMPLE 1: Research goals</strong></p>
<p>Check out the <code>weather_data</code>:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>           MinTemp MaxTemp Rainfall Evaporation Sunshine WindGustSpeed
Albury        13.4    22.9      0.6         7.4     10.1            44
Newcastle     13.2    27.2      0.0         7.4     13.0            44
Penrith       15.2    32.6      0.0         7.4     10.9            59
Sydney        17.6    31.3      0.0         7.6     10.9            44
Wollongong     9.5    17.9      0.4         6.8     10.1            52
Canberra      13.6    25.2      0.0         9.6     13.0            80
           WindSpeed9am WindSpeed3pm Humidity9am Humidity3pm Pressure9am
Albury               20           24          71          22      1007.7
Newcastle             6           19          50          24      1013.9
Penrith              13           22          35          23      1009.1
Sydney                2           24          29          21      1009.1
Wollongong           20           24          52          44      1007.9
Canberra             26           43          31          28      1006.3
           Pressure3pm Cloud9am Cloud3pm Temp9am RainTodayNo RainTodayYes
Albury          1007.1        8        5    16.9           1            0
Newcastle       1010.1        3        4    21.8           1            0
Penrith         1007.1        3        4    24.4           1            0
Sydney          1004.6        3        7    24.9           1            0
Wollongong      1003.3        5        5    14.0           0            1
Canberra        1004.4        1        6    19.9           1            0
           RISK_MM
Albury           0
Newcastle        0
Penrith          0
Sydney           0
Wollongong       0
Canberra         0</code></pre>
</div>
</div>
<ol type="a">
<li><p>Identify a research goal that could be addressed using one of our <strong>clustering</strong> algorithms.</p></li>
<li><p>Identify a research goal that could be addressed using our <strong>PCA</strong> dimension reduction algorithm.</p></li>
</ol>
<details>
<summary>
Solution:
</summary>
<ol type="a">
<li>What cities are similar w.r.t. their weather patterns?</li>
<li>How can we <em>combine</em> these correlated weather features into a smaller set? (for the purpose of supervised learning, computational efficiency, etc.)</li>
</ol>
</details>
<p><br></p>
<p><strong>EXAMPLE 2: Starting small</strong></p>
<p>Let’s start with just 3 <em>correlated</em> features: <span class="math inline">\(x_1\)</span> (Temp9am), <span class="math inline">\(x_2\)</span> (MinTemp), and <span class="math inline">\(x_3\)</span> (WindSpeed9am)</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L19-pca_files/figure-revealjs/unnamed-chunk-5-1.png" width="480"></p>
</figure>
</div>
</div>
</div>
<p>The goal of PCA will be to <em>combine</em> these correlated features into a <em>smaller</em> set of <strong>uncorrelated</strong> principal components (PCs) without losing a significant amount of information.</p>
<ol type="a">
<li><p>The first PC will be defined to retain the greatest variability, hence information in the original features. What do you expect the first PC to be like?</p></li>
<li><p>How many PCs do you think we’ll need to keep without losing too much of the original information?</p></li>
</ol>
<details>
<summary>
Solution:
</summary>
<ol type="a">
<li>We might expect it to be driven by Temp9am and MinTemp which are strongly correlated.</li>
<li>Maybe 2? PC1 might contain strong info about the temp features and PC2 might contain strong info about wind.</li>
</ol>
</details>
<p><br></p>
<p><strong>EXAMPLE 3: Defining the PCs</strong></p>
<p>Perform a PCA on the <code>small_example</code> data:</p>
<p>This creates 3 PCs which are each different <em>combinations</em> of the (standardized) original features:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>               Temp9am     MinTemp WindSpeed9am
Albury     -0.49164877 -0.10016777    0.5179183
Newcastle   0.25610853 -0.13455372   -1.3350783
Penrith     0.65287772  0.20930578   -0.4085800
Sydney      0.72917948  0.62193718   -1.8645059
Wollongong -0.93419901 -0.77069379    0.5179183
Canberra   -0.03383817 -0.06578182    1.3120597</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                  PC1         PC2         PC3
Albury     -0.6119817  0.27733759 -0.26182765
Newcastle   0.6944764 -1.15487603  0.22381760
Penrith     0.7312569 -0.09374376  0.30573078
Sydney      1.7089610 -1.21413476  0.01482615
Wollongong -1.3091122 -0.09282229 -0.11200583
Canberra   -0.6683498  1.12907017  0.07404101</code></pre>
</div>
</div>
<p>Specifically, these PCs are <em>linear combinations</em> of the (standardized) original x features, defined by <strong>loadings</strong> a:</p>
<p><span class="math inline">\(PC_1 = a_{11}x_1 + a_{12}x_2 + a_{13}x_3\)</span></p>
<p><span class="math inline">\(PC_2 = a_{21}x_1 + a_{22}x_2 + a_{23}x_3\)</span></p>
<p><span class="math inline">\(PC_3 = a_{31}x_1 + a_{32}x_2 + a_{33}x_3\)</span></p>
<p>And these linear combinations are defined so that the PCs are <em>uncorrelated</em>, thus each contain <em>unique</em> weather information about the cities!</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L19-pca_files/figure-revealjs/unnamed-chunk-8-1.png" width="480"></p>
</figure>
</div>
</div>
</div>
<ol type="a">
<li><p>Use the loadings below to specify the formula for the first PC.</p>
<p>PC1 = ___*Temp9am + ___*MinTemp + ___*WindSpeed9am</p></li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                    PC1       PC2         PC3
Temp9am       0.6312659 0.2967160  0.71656333
MinTemp       0.6230387 0.3562101 -0.69637431
WindSpeed9am -0.4618725 0.8860440  0.03999775</code></pre>
</div>
</div>
<ol start="2" type="a">
<li>For just the first city, confirm that its PC1 coordinate or <strong>score</strong> can be calculated from its original coordinates using the formula in part a:</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>          Temp9am    MinTemp WindSpeed9am
Albury -0.4916488 -0.1001678    0.5179183</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>              PC1       PC2        PC3
Albury -0.6119817 0.2773376 -0.2618276</code></pre>
</div>
</div>
<details>
<summary>
Solution:
</summary>
<ol type="a">
<li>PC1 = 0.6312659 Temp9am + 0.6230387 MinTemp - 0.4618725 WindSpeed9am</li>
<li></li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.6119818</code></pre>
</div>
</div>
</details>
<p><br></p>
<p><strong>EXAMPLE 4: Examining the components of each PC (part 1)</strong></p>
<p>Plots can help us interpret the above numerical loadings, hence the important components of each PC.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L19-pca_files/figure-revealjs/unnamed-chunk-12-1.png" width="768"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L19-pca_files/figure-revealjs/unnamed-chunk-13-1.png" width="768"></p>
</figure>
</div>
</div>
</div>
<ol type="a">
<li><p>Which features contribute the most, either positively or negatively, to the first PC?</p></li>
<li><p>What about the second PC?</p></li>
</ol>
<details>
<summary>
Solution:
</summary>
<ol type="a">
<li>PC1 is driven primarily by Temp9am and MinTemp (positively) and with contrast to WindSpeed9am (negatively)</li>
<li>PC2 is driven primarily by WindSpeed9am (positively)</li>
</ol>
</details>
<p><br></p>
<p><strong>EXAMPLE 5: Examining the components of each PC (part 2)</strong></p>
<p>When we have a lot of features x, the above plots get messy. A <strong>loadings plot</strong> or <strong>correlation circle</strong> is another way to visualize PC1 and PC2 (the most important PCs):</p>
<ul>
<li>each <em>arrow</em> represents a feature x</li>
<li>the x-coordinate of an arrow reflects the <em>correlation</em> between x and PC1</li>
<li>the y-coordinate of an arrow reflects the <em>correlation</em> between x and PC2</li>
<li>arrow <em>length</em> reflects how much the feature contributes to the first 2 PCs</li>
</ul>
<p>It is powerful in that it can provide a 2-dimensional visualization of high dimensional data (just 3 dimensions in our small example here)!</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L19-pca_files/figure-revealjs/unnamed-chunk-14-1.png" width="576"></p>
</figure>
</div>
</div>
</div>
<ol type="a">
<li><p>Positively correlated features point in similar directions. The opposite is true for negatively correlated features. What do you learn here?</p></li>
<li><p>Which features are most highly correlated with, hence contribute the most to, the first PC (x-axis)? (Is this consistent with what we observed in the earlier plots?)</p></li>
<li><p>What about the second PC?</p></li>
</ol>
<details>
<summary>
Solution:
</summary>
<ol type="a">
<li>Temp9am and MinTemp are highly positively correlated; Windspeed9am seems to have a negative relationship with temperature</li>
<li>Temp9am and MinTemp primarily contribute to PC1 with a bit of negative contrast with WindSpeed9am</li>
<li>WindSpeed9am contributes to PC2</li>
</ol>
</details>
<p><br></p>
<p><strong>EXAMPLE 6: Examining the amount of information captured by each PC (numerical metrics)</strong></p>
<p>Now that we better understand the <em>structures</em> of the PCs, let’s examine the relative amount of information they each capture from the original set of features:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
     PC std.dev percent cumulative    var
  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;
1     1   1.50   0.753       0.753 2.26  
2     2   0.812  0.220       0.973 0.660 
3     3   0.284  0.0268      1     0.0805</code></pre>
</div>
</div>
<p>NOTE:</p>
<ul>
<li><code>var</code> = amount of variability, hence information, in the original features captured by each PC</li>
<li><code>percent</code> = % of original information captured by each PC</li>
<li><code>cumulative</code> = cumulative % of original information captured by the PCs</li>
</ul>
<ol type="a">
<li>What % of the original information is captured by PC1? Confirm using both the <code>var</code> and <code>percent</code> columns.</li>
</ol>
<ol start="2" type="a">
<li><p>What % of the original information is captured by PC2?</p></li>
<li><p>In total, 100% of the original information is captured by PC1, PC2, and PC3. What % of the original info would we retain if we only kept PC1 and PC2, i.e.&nbsp;if we reduced the PC dimensions by 1? Confirm using both the <code>percent</code> and <code>cumulative</code> columns.</p></li>
</ol>
<details>
<summary>
Solution:
</summary>
<ol type="a">
<li>75.3%</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.7532078</code></pre>
</div>
</div>
<ol start="2" type="a">
<li>22.0%</li>
<li>97.3%</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.973</code></pre>
</div>
</div>
</details>
<p><br></p>
<p><strong>EXAMPLE 7: Examining the amount of information captured by each PC (SCREE plots)</strong></p>
<p>Especially when we start with lots of features, graphical summaries of the above tidy summary can help understand the variation captured by the PCs:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L19-pca_files/figure-revealjs/unnamed-chunk-20-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L19-pca_files/figure-revealjs/unnamed-chunk-21-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
<p>Based on these summaries, how many and which of the 3 PCs does it make sense to keep?</p>
<p>Thus by how much can we reduce the dimensions of our dataset?</p>
<details>
<summary>
Solution:
</summary>
2 (maybe 1). The first 2 PCs account for nearly 100% of the variance. (The first PC alone also accounts for a lot, and maybe enough depending upon our research goals.)
</details>
<p><br></p>
<p><strong>EXAMPLE 8: Examining the new PC coordinates of the data points (score plots)</strong></p>
<p>Finally, now that we better understand the “meaning” of our 3 new PCs, let’s explore their outcomes for each city (row) in the dataset. The below <strong>scores</strong> provide the new coordinates with respect to the 3 PCs:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                  PC1         PC2         PC3
Albury     -0.6119817  0.27733759 -0.26182765
Newcastle   0.6944764 -1.15487603  0.22381760
Penrith     0.7312569 -0.09374376  0.30573078
Sydney      1.7089610 -1.21413476  0.01482615
Wollongong -1.3091122 -0.09282229 -0.11200583
Canberra   -0.6683498  1.12907017  0.07404101</code></pre>
</div>
</div>
<p>A <strong>score plot</strong> maps out the scores of the first, and most important, 2 PCs for each city. PC1 is on the x-axis and PC2 on the y-axis.</p>
<p>Again, since these PCs are linear combinations of all original features (only 3 here), a score plot can provide a 2-dimensional visualization of high dimensional data!</p>
<p>Question: Unless you’re familiar with Australian geography, it might be tough to ascertain any meaningful patterns here.</p>
<p>Looking back to the map, and recalling the key information captured by PC1 and PC2, does there appear to be any geographical explanation of which cities are similar with respect to their PC1 and PC2 scores?</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L19-pca_files/figure-revealjs/unnamed-chunk-23-1.png" width="576"></p>
</figure>
</div>
</div>
</div>
<details>
<summary>
Solution:
</summary>
will vary. it’s not obvious to me personally! Some students have shared that more northern (warmer) cities tend to be “clustered”. Ditto southern (cooler) cities.
</details>
<p><br></p>
<p><strong>EXAMPLE 9: PCA using all features</strong></p>
<p>Repeat the PCA using all 18 original features in the <code>weather_data</code>, our goal being to reduce the dimensions of this dataset while still maintaining a “sufficient” amount of the original information!</p>
<p>This produces 18 <em>uncorrelated</em> PCs that are linear combinations of the original (standardized) features:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>                  PC1        PC2         PC3         PC4         PC5        PC6
Albury     -0.4347320  0.6310084 -0.00249586  1.58334640 -0.75416235  0.5584570
Newcastle   1.1354168 -1.4874342 -1.68801307 -0.08843211 -0.29711827 -0.3570227
Penrith     0.5295179 -2.0629031  0.31172583 -0.40979567 -0.55894823  0.2923958
Sydney      1.0471702 -1.8638332  0.90468479 -0.19738978 -1.36015610 -0.7805383
Wollongong -2.3244856  1.5540074  0.07924589  0.03387889  0.08171723 -0.2007186
Canberra   -2.6420711 -2.6213046  0.97957591 -0.87130315 -1.63498832  0.3104203
                  PC7        PC8         PC9       PC10         PC11
Albury     -0.5030481 -1.0032728  1.49263281 -0.3770739  0.217419531
Newcastle  -0.5342649 -0.8260785 -0.12901337  0.5524187 -0.019147225
Penrith     0.1669854 -0.5264088 -0.03359561  0.0720234  0.003082526
Sydney     -1.4130771 -1.1624668 -1.05279963 -0.1089470 -0.059738227
Wollongong  0.5253852 -0.7279453 -0.64889066 -0.3814026  0.264308869
Canberra   -0.7598967  1.5625904  0.32417904  1.1590349  0.106050706
                  PC12       PC13          PC14        PC15        PC16
Albury     -0.91098812  0.3093372 -0.1194868349 -0.04732443  0.20006422
Newcastle  -0.31768269 -0.3689492 -0.0020756144 -0.25958440 -0.12764212
Penrith    -0.01413404  0.5423686  0.0751576394  0.11900530 -0.18078633
Sydney      0.37396249  0.1287991 -0.0270416392  0.30938838  0.06210685
Wollongong  0.95247931 -0.1039939  0.2175806676 -0.29571978 -0.03130589
Canberra    0.02913232 -0.3468298 -0.0001989966 -0.05693145  0.10311335
                  PC17          PC18
Albury     -0.10798959 -1.356546e-17
Newcastle   0.14708667  9.745684e-17
Penrith     0.22254521 -1.245878e-16
Sydney     -0.09870755 -2.356101e-16
Wollongong -0.18911254  5.790386e-17
Canberra   -0.03666081 -2.911212e-16</code></pre>
</div>
</div>
<ol type="a">
<li>Suppose we wanted to retain at least 80% of the information in the original 18 features. What’s the smallest number of PCs we need to keep? <em>Thus how much can we reduce the original dimensions?</em></li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 4
      PC  std.dev percent cumulative
   &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
 1     1 2.22e+ 0 0.274        0.274
 2     2 1.95e+ 0 0.212        0.486
 3     3 1.62e+ 0 0.146        0.632
 4     4 1.40e+ 0 0.109        0.741
 5     5 1.12e+ 0 0.0696       0.810
 6     6 9.25e- 1 0.0475       0.858
 7     7 8.32e- 1 0.0385       0.896
 8     8 6.90e- 1 0.0265       0.923
 9     9 6.46e- 1 0.0232       0.946
10    10 5.68e- 1 0.0179       0.964
11    11 4.86e- 1 0.0131       0.977
12    12 4.60e- 1 0.0118       0.989
13    13 3.05e- 1 0.00517      0.994
14    14 2.33e- 1 0.00301      0.997
15    15 1.71e- 1 0.00163      0.998
16    16 1.28e- 1 0.00091      0.999
17    17 1.04e- 1 0.0006       1    
18    18 1.34e-16 0            1    </code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L19-pca_files/figure-revealjs/unnamed-chunk-27-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="a">
<li>Check out some plots of the loadings in the more important PCs. Describe the general properties of the first 2 PCs. What original features do they most capture?</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L19-pca_files/figure-revealjs/unnamed-chunk-28-1.png" width="768"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L19-pca_files/figure-revealjs/unnamed-chunk-29-1.png" width="576"></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="a">
<li>Finally, check out the <strong>score plot</strong> for the first 2 PCs. Does there appear to be any geographical explanation of which cities are similar with respect to their PC1 and PC2 scores?</li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L19-pca_files/figure-revealjs/unnamed-chunk-30-1.png" width="576"></p>
</figure>
</div>
</div>
</div>
<details>
<summary>
Solution:
</summary>
<ol type="a">
<li>5</li>
<li>first PC is driven by air related features such as windspeed, air pressure, and temperature. second PC is driven by water related features such as humidity and rain.</li>
<li>again, not obvious to me!</li>
</ol>
</details>
<p><strong>EXAMPLE 10: Drawbacks</strong></p>
<ol type="a">
<li>In what kind of scenario would you be relieved to have PCA as a tool?<br>
</li>
<li>What are the drawbacks of PCA? When might you hesitate to use it?</li>
</ol>
<details>
<summary>
Solution:
</summary>
<ol type="a">
<li><p>when we have lots and lots of features, we want to simplify the data set while retaining the information, and we don’t care about losing the meaning of the original features.</p></li>
<li><p>if we’re specifically interested in the original features (and don’t want to combine them into tough to interpret PCs)</p></li>
</ol>
</details>
</section>
<section id="exercises" class="slide level2 unnumbered scrollable">
<h2>Exercises</h2>
<p><strong>NOTES:</strong></p>
<ul>
<li>These exercises are on Homework 7. The R code section below will be handy.</li>
</ul>
<ol start="7" type="1">
<li><strong>PCA Part 1</strong><br>
There are quite a few features in the <code>candy_rankings</code> data. Let’s do some dimension reduction. NOTE: One of the challenges of continuing to analyze the dataset using different techniques is that these techniques work differently, thus can require differently structured data. With this in mind, take care at the beginning this exercise to ensure that you’re working with the original data (without any clustering info in it).
<ol type="a">
<li>Construct PCA for the <em>original features</em> in <code>candy_rankings</code> with the following in mind:
<ul>
<li>Do not include <code>winpercent</code> in your PCA</li>
<li>Do not include any new features (eg: cluster assignments) in your PCA<br>
</li>
</ul></li>
<li>Construct a <strong>score plot</strong>.</li>
<li>Provide two takeaways, or things you learned, from the score plot. NOTE: If you’re unfamiliar with the candies, you might look back at their data.</li>
<li>Are your observations about candies in part c consistent with your clustering conclusions? Explain what similarities or differences do you notice.</li>
</ol></li>
</ol>
<p><br>
<br>
</p>
<ol start="8" type="1">
<li><strong>PCA Part 2</strong>
<ol type="a">
<li>Construct a plot of the cumulative percent of the original information captured by the PCs.</li>
<li>How many principal components do we need to keep in order to retain at least 60% of the information in the 11 original candy features?</li>
<li>Construct a <strong>loadings plot</strong> AND a bar plot of the loadings for the first 2 PCs.</li>
<li>Highlight <em>one</em> pair of the original features that are positively correlated <strong>AND</strong> one pair that are negatively correlated.</li>
<li>Point out at least 2 original features that contribute most strongly (positively or negatively) to the first principal component. If you notice any theme to these features, say so.</li>
</ol></li>
</ol>
</section>
<section id="notes-r-code" class="slide level2 unnumbered">
<h2>Notes: R code</h2>
<p>Suppose we have a set of <code>sample_data</code> with multiple feature columns x, and (possibly) a column named <code>id</code> which labels each data point.</p>
<p><br>
</p>
<p><strong>PROCESS THE DATA</strong></p>
<p>If there’s a column that’s an identifying variable or label, not a feature of the data points, convert it to a row name.</p>
<p>PCA can’t handle NA values! There are a couple options.</p>
<p>IF you have at least 1 <em>categorical</em> / factor feature, you’ll need to pre-process the data even further. You should NOT do this if you have <em>quantitative</em> and/or <em>logical</em> features.</p>
<p><br>
<br>
</p>
<p><strong>RUN THE PCA</strong></p>
<p><br>
<br>
</p>
<p><strong>CHECK OUT THE PCs</strong></p>
<p><br>
<br>
</p>
<p><strong>EXAMINE AMOUNT OF VARIABILITY / INFORMATION CAPTURED BY EACH PC</strong></p>
<p><br>
<br>
</p>
<p><strong>EXAMINE THE SCORES, i.e PC COORDINATES FOR THE DATA POINTS</strong></p>
<p><br>
<br>
<br>
<br>
<br>
<br>
</p>
</section>
<section id="deeper-learning-optional" class="slide level2 unnumbered">
<h2>Deeper learning (OPTIONAL)</h2>
<p><strong>ALTERNATIVES TO PCA</strong></p>
<p>For more dimension reduction techniques, check out:</p>
<ul>
<li>https://juliasilge.com/blog/billboard-100/</li>
<li>https://www.analyticsvidhya.com/blog/2018/08/dimensionality-reduction-techniques-python/</li>
</ul>
<p><br>
<br>
</p>
<p><strong>MATH BEHIND PCA</strong></p>
<p>Let <span class="math inline">\(X\)</span> be our original (centered) <span class="math inline">\(n \times p\)</span> data matrix. Mathematically, PCA produces an <strong>orthogonal linear transformation</strong> of <span class="math inline">\(X\)</span>. To this end, first note that the <strong>covariance</strong> or relationship among the features in <span class="math inline">\(X\)</span> is proportional to the <span class="math inline">\(p \times p\)</span> matrix</p>
<p><span class="math display">\[X^TX\]</span></p>
<p>Further, we can express this covariance structure as</p>
<p><span class="math display">\[X^TX = W \Lambda W^T\]</span></p>
<p>where <span class="math inline">\(W\)</span> is a <span class="math inline">\(p \times p\)</span> matrix, the columns of which are eigenvectors of <span class="math inline">\(X^TX\)</span>, and <span class="math inline">\(\Lambda\)</span> is a diagonal matrix of eigenvalues.</p>
<ul>
<li><strong>principal components</strong><br>
The <span class="math inline">\(p\)</span> principal components are defined by the columns of <span class="math inline">\(W\)</span>.<br>
</li>
<li><strong>scores</strong><br>
<span class="math inline">\(XW\)</span> maps the original data to the transformed data set, the columns of which are the scores (coordinates) for each of the PCs.<br>
</li>
<li><strong>loadings</strong><br>
Scaling the columns of <span class="math inline">\(W\)</span>, ie. multiplying them by the square root of the corresponding eigenvalue, gives the loadings.</li>
<li><strong>proportion of variance explained by each principal component</strong><br>
The eigenvalues in <span class="math inline">\(\Lambda\)</span> measure the relative proportion of variability that’s explained by each principal component (eg: <span class="math inline">\(\lambda_1 / (\lambda_1 + \cdots + \lambda_p)\)</span>).</li>
</ul>
<p>Alternatively, we can obtain the principal components via <strong>singular value decomposition (SVD)</strong>. Instead of decomposing <span class="math inline">\(X^TX\)</span>, SVD decomposes <span class="math inline">\(X\)</span>. In fact, this is a bit more computationally stable! Specifically, SVD expresses <span class="math inline">\(X\)</span> as</p>
<p><span class="math display">\[X = U \Sigma W^T\]</span></p>
<p>where <span class="math inline">\(U\)</span> is an <span class="math inline">\(n \times n\)</span> matrix of orthogonal <em>left singular vectors</em> of <span class="math inline">\(X\)</span> and <span class="math inline">\(\Sigma\)</span> is an <span class="math inline">\(n \times p\)</span> diagonal matrix of <em>singular values</em>. Then <span class="math inline">\(W\)</span> still provides the principal components and the diagonal of <span class="math inline">\(\Sigma^2\)</span> is equivalent to the diagonal of <span class="math inline">\(\Lambda\)</span> since by the SVD,</p>
<p><span class="math display">\[X^TX = W \Sigma^T U^T U \Sigma W^T = W \Sigma^2 W^T\]</span></p>
<p>Further resource: https://www.hackerearth.com/blog/developers/principal-component-analysis-with-linear-algebra/</p>
<div class="quarto-auto-generated-content">
<div class="footer footer-default">
<p><a href="https://kegrinde.github.io/stat253_coursenotes" class="uri">https://kegrinde.github.io/stat253_coursenotes</a></p>
</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="L19-pca_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="L19-pca_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="L19-pca_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="L19-pca_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="L19-pca_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="L19-pca_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="L19-pca_files/libs/revealjs/plugin/multiplex/socket.io.js"></script>
  <script src="L19-pca_files/libs/revealjs/plugin/multiplex/multiplex.js"></script>
  <script src="L19-pca_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="L19-pca_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="L19-pca_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="L19-pca_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="L19-pca_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'multiplex': {"secret":"17313745565632102368","id":"65e775bd85e2ad0c","url":"https://reveal-multiplex.glitch.me/"},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>