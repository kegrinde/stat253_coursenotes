<!DOCTYPE html>
<html lang="en"><head>
<script src="L02-evaluating-regression-models_files/libs/clipboard/clipboard.min.js"></script>
<script src="L02-evaluating-regression-models_files/libs/quarto-html/tabby.min.js"></script>
<script src="L02-evaluating-regression-models_files/libs/quarto-html/popper.min.js"></script>
<script src="L02-evaluating-regression-models_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="L02-evaluating-regression-models_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="L02-evaluating-regression-models_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="L02-evaluating-regression-models_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="L02-evaluating-regression-models_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.555">

  <title>Model Evaluation</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="L02-evaluating-regression-models_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="L02-evaluating-regression-models_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="L02-evaluating-regression-models_files/libs/revealjs/dist/theme/quarto.css">
  <link href="L02-evaluating-regression-models_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="L02-evaluating-regression-models_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="L02-evaluating-regression-models_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="L02-evaluating-regression-models_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="L02-evaluating-regression-models_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="L02-evaluating-regression-models_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Model Evaluation</h1>

<div class="quarto-title-authors">
</div>

</section>
<section id="settling-in" class="title-slide slide level1 smaller unnumbered center">
<h1>Settling In</h1>
<ul>
<li>Sit with at least 2 new people and introduce yourself</li>
<li>Sign up for the <a href="https://docs.google.com/document/d/1Z2Ex-_z_8vm2ZhgdT4le-DwieUCtYZM8dDysaj6bseI/edit?usp=sharing">MSCS Community Mailing List</a> for information about MSCS-related events, internship opportunities, etc.</li>
<li>Prepare to take notes:
<ul>
<li>Download <a href="template_qmds/02-regression-model-evaluation-notes.qmd">this Quarto Document</a></li>
<li>Save this QMD in the “STAT 253 &gt; Notes” folder you created for Checkpoint 1</li>
<li><code>Render</code> (Knit) the QMD and check out the general structure</li>
<li>This is where you’ll take notes today! Use this however is best for your own learning — you won’t hand it in.</li>
</ul></li>
</ul>
</section>

<section id="learning-goals" class="title-slide slide level1 unnumbered smaller center">
<h1>Learning Goals</h1>
<ul>
<li>Practice building and evaluating linear regression models in RStudio. Specifically:
<ul>
<li>Create and interpret residuals vs.&nbsp;fitted, residuals vs.&nbsp;predictor plots to identify improvements in modeling and address ethical concerns.</li>
<li>Calculate and interpret MSE, RMSE, MAE, and R-squared in a contextually meaningful way.</li>
</ul></li>
<li>Review some STAT 155 concepts and RStudio tools.</li>
<li>Start using the <code>tidymodels</code> package to build and evaluate regression models.</li>
<li>Get used to the course workflow, e.g.&nbsp;taking notes.</li>
</ul>
</section>

<section>
<section id="small-group-discussion" class="title-slide slide level1 unnumbered center">
<h1>Small Group Discussion</h1>

</section>
<section id="directions" class="slide level2 unnumbered smaller">
<h2>Directions</h2>
<ul>
<li>In small groups, please first introduce yourself (in whatever way you feel appropriate) and check in with each other as human beings.</li>
<li>When everyone is ready, glance through the summary of concepts covered in the video (see “Video Recap” below) and discuss the following prompts:
<ul>
<li>What vocabulary or notation was new to you?</li>
<li>What concepts were new to you?</li>
<li>What concepts are still unclear to you at this moment?</li>
</ul></li>
<li>Prepare to share a few highlights from your group discussion with the entire class</li>
</ul>
</section>
<section id="video-recap" class="slide level2 unnumbered scrollable">
<h2>Video Recap</h2>
<center>
<img src="images/MLdiagram1.jpg">
</center>
<p>We are in the <strong>regression</strong> setting. We want to build a model of some <strong>quantitative</strong> output variable <span class="math inline">\(y\)</span> by some predictors <span class="math inline">\(x\)</span>:</p>
<p><span class="math display">\[y = f(x) + \epsilon\]</span></p>
<p>There are many regression tools that we might use to build this model. We’ll use a <strong>linear regression</strong> model which assumes that <span class="math inline">\(y\)</span> is a linear combination of the <span class="math inline">\(x\)</span>’s:</p>
<p><span class="math display">\[y = \beta_0 + \beta_1 x_1 + \beta_2 x_2 + \cdots \beta_p x_p + \epsilon\]</span></p>
<p>After <em>building</em> any model, it’s important to <em>evaluate</em> it: <strong>Is our <em>regression model</em> a “<em>good</em>” model?</strong></p>
<ol type="1">
<li>Is the model wrong?</li>
<li>Is the model strong?</li>
<li>Does the model produce accurate predictions?</li>
<li>Is the model fair?</li>
</ol>
<p>We will review these concepts through today’s exercises. A detailed overview is provided in the “Motivating Question” section under “Regression: Model Evaluation (Unit 1)” on the course website.</p>
</section></section>
<section>
<section id="notes-r-code" class="title-slide slide level1 unnumbered center">
<h1>Notes: R Code</h1>

</section>
<section id="intro-to-tidymodels" class="slide level2 unnumbered">
<h2>Intro to tidymodels</h2>
<p>Throughout the semester, we are going to use the <strong>tidymodels</strong> package in R.</p>
<ul>
<li>Similar flavor to <strong>tidyverse</strong> structure</li>
<li>More general structure that allows us to fit many other types of models</li>
</ul>
<div class="fragment">
<p>At first, it will seem like <em>a lot more code</em> (perhaps even <em>unnecessarily so</em>).</p>
</div>
<div class="fragment">
<p>For example, what you did in STAT 155 with</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="fu">lm</span>(y <span class="sc">~</span> x1 <span class="sc">+</span> x2, <span class="at">data =</span> sample_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<p>will now look like</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href=""></a><span class="co"># STEP 1: model specification</span></span>
<span id="cb2-2"><a href=""></a>lm_spec <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span> <span class="co"># we want a linear regression model</span></span>
<span id="cb2-3"><a href=""></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) <span class="sc">%&gt;%</span>  <span class="co"># this is a regression task (y is quantitative)</span></span>
<span id="cb2-4"><a href=""></a>  <span class="fu">set_engine</span>(<span class="st">"lm"</span>)<span class="co"># we'll estimate the model using the lm function</span></span>
<span id="cb2-5"><a href=""></a></span>
<span id="cb2-6"><a href=""></a><span class="co"># STEP 2: model estimation</span></span>
<span id="cb2-7"><a href=""></a>model_estimate <span class="ot">&lt;-</span> lm_spec <span class="sc">%&gt;%</span> </span>
<span id="cb2-8"><a href=""></a>  <span class="fu">fit</span>(y <span class="sc">~</span> x1 <span class="sc">+</span> x2, <span class="at">data =</span> sample_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<p>But you’ll need to <em>trust me</em>…</p>
</div>
</section>
<section id="highlight-useful-model-evaluation-functions" class="slide level2 unnumbered">
<h2>Highlight: Useful Model Evaluation Functions</h2>
<p>A few useful functions to use on <code>model_estimate</code>:</p>
<p><br></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a>model_estimate <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href=""></a>  <span class="fu">tidy</span>() <span class="co">#gives you coefficients (and se, t-statistics)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href=""></a>model_estimate <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> sample_data) <span class="co"># gives you predictions and residuals for sample_data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href=""></a>model_estimate <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href=""></a>  <span class="fu">glance</span>() <span class="co">#gives you some model evaluation metrics (is it strong?)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href=""></a>model_estimate <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> sample_data) <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href=""></a>  <span class="fu">mae</span>(<span class="at">truth =</span> y, <span class="at">estimate =</span> .pred) <span class="co"># calculates MAE to measure accuracy of predictions</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment">
<p>More info, for future reference, below!</p>
</div>
</section>
<section id="future-reference-r-code-for-building-and-evaluating-regression-models" class="slide level2 unnumbered">
<h2>Future Reference: R Code for Building and Evaluating Regression Models</h2>
<p>This section is for <strong>future</strong> reference. It is a summary of code you’ll learn below for building and evaluating regression models. Throughout, suppose we wish to build and evaluate a linear regression model of <code>y</code> vs <code>x1</code> and <code>x2</code> using our <code>sample_data</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href=""></a><span class="co"># Load packages</span></span>
<span id="cb7-2"><a href=""></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb7-3"><a href=""></a><span class="fu">library</span>(tidymodels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Building a linear regression model</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a><span class="co"># STEP 1: specify the type of model to build</span></span>
<span id="cb8-2"><a href=""></a>lm_spec <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span> <span class="co"># we want a linear regression model</span></span>
<span id="cb8-3"><a href=""></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) <span class="sc">%&gt;%</span>  <span class="co"># this is a regression task (y is quantitative)</span></span>
<span id="cb8-4"><a href=""></a>  <span class="fu">set_engine</span>(<span class="st">"lm"</span>) <span class="co"># we'll estimate the model using the lm function</span></span>
<span id="cb8-5"><a href=""></a></span>
<span id="cb8-6"><a href=""></a><span class="co"># STEP 2: estimate the specified model using sample data</span></span>
<span id="cb8-7"><a href=""></a>model_estimate <span class="ot">&lt;-</span> lm_spec <span class="sc">%&gt;%</span> </span>
<span id="cb8-8"><a href=""></a>  <span class="fu">fit</span>(y <span class="sc">~</span> x1 <span class="sc">+</span> x2, <span class="at">data =</span> sample_data)</span>
<span id="cb8-9"><a href=""></a></span>
<span id="cb8-10"><a href=""></a><span class="co"># Get the model coefficients</span></span>
<span id="cb8-11"><a href=""></a>model_estimate <span class="sc">%&gt;%</span> </span>
<span id="cb8-12"><a href=""></a>  <span class="fu">tidy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Obtaining predictions (&amp; residuals) for each observation</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href=""></a><span class="co"># Obtain y predictions and residuals for each observation in our sample_data</span></span>
<span id="cb9-2"><a href=""></a><span class="co"># (We can replace sample_data with any data frame that includes y, x1, and x2)</span></span>
<span id="cb9-3"><a href=""></a>model_estimate <span class="sc">%&gt;%</span> </span>
<span id="cb9-4"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> sample_data)</span>
<span id="cb9-5"><a href=""></a></span>
<span id="cb9-6"><a href=""></a><span class="co"># Obtain y predictions (but not residuals) for some given x1, x2 values, when we haven't yet observed y</span></span>
<span id="cb9-7"><a href=""></a><span class="co"># (We can replace the data.frame with any data frame that includes x1 and x2)</span></span>
<span id="cb9-8"><a href=""></a>model_estimate <span class="sc">%&gt;%</span> </span>
<span id="cb9-9"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> <span class="fu">data.frame</span>(<span class="at">x1 =</span> ___, <span class="at">x2 =</span> ___))</span>
<span id="cb9-10"><a href=""></a>  </span>
<span id="cb9-11"><a href=""></a><span class="co"># Another approach using predict()</span></span>
<span id="cb9-12"><a href=""></a>model_estimate <span class="sc">%&gt;%</span> </span>
<span id="cb9-13"><a href=""></a>  <span class="fu">predict</span>(<span class="at">new_data =</span> <span class="fu">data.frame</span>(<span class="at">x1 =</span> ___, <span class="at">x2 =</span> ___))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Evaluating the model</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href=""></a><span class="co"># Is it strong? (R^2)</span></span>
<span id="cb10-2"><a href=""></a>model_estimate <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href=""></a>  <span class="fu">glance</span>()</span>
<span id="cb10-4"><a href=""></a></span>
<span id="cb10-5"><a href=""></a><span class="co"># Does it produce accurate predictions? (MAE)</span></span>
<span id="cb10-6"><a href=""></a>model_estimate <span class="sc">%&gt;%</span> </span>
<span id="cb10-7"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> sample_data) <span class="sc">%&gt;%</span> </span>
<span id="cb10-8"><a href=""></a>  <span class="fu">mae</span>(<span class="at">truth =</span> y, <span class="at">estimate =</span> .pred)</span>
<span id="cb10-9"><a href=""></a></span>
<span id="cb10-10"><a href=""></a><span class="co"># Is it wrong? (residual plot)</span></span>
<span id="cb10-11"><a href=""></a>model_estimate <span class="sc">%&gt;%</span> </span>
<span id="cb10-12"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> sample_data) <span class="sc">%&gt;%</span> </span>
<span id="cb10-13"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .pred, <span class="at">y =</span> .resid)) <span class="sc">+</span> </span>
<span id="cb10-14"><a href=""></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb10-15"><a href=""></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="exercises" class="title-slide slide level1 unnumbered center">
<h1>Exercises</h1>

</section>
<section id="instructions" class="slide level2 smaller unnumbered">
<h2>Instructions</h2>
<ul>
<li>Work through these exercises as a group, talking through your ideas, questions, and reasoning as you go and taking notes in your QMD</li>
<li><strong>Be kind to yourself/each other!</strong> You will be rusty and make mistakes, and that’s ok! Mistakes are important to learning.</li>
<li><strong>Focus on patterns in code.</strong> Review, but do not try to <em>memorize</em> any provided code. Focus on the general steps and patterns.</li>
<li>If you’re given some starter code with blanks (e.g.&nbsp;below), don’t type in those chunks. Instead, copy, paste, and modify the starter code in the chunk below it.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href=""></a><span class="co"># Start small: rides vs temp</span></span>
<span id="cb11-2"><a href=""></a><span class="fu">ggplot</span>(___, <span class="fu">aes</span>(<span class="at">y =</span> ___, <span class="at">x =</span> ___)) <span class="sc">+</span> </span>
<span id="cb11-3"><a href=""></a>  <span class="fu">geom___</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>Ask questions!</strong> We will not have time to discuss all exercises at the end of class. Talk through your questions as a group, and ask me questions as I walk around the room!</li>
<li><strong>Collaborate.</strong> We’re sitting in groups for a reason. Collaboration improves higher-level thinking, confidence, communication, community, and more. I expect you to:
<ul>
<li>Actively contribute to discussion (don’t work on your own)</li>
<li>Actively include all group members in discussion</li>
<li>Create a space where others feel comfortable making mistakes &amp; sharing their ideas (remember that we all come to this class with different experiences, both personal and academic)</li>
<li>Stay in sync while respecting that everybody has different learning strategies, work styles, note taking strategies, etc. If some people are working on exercise 10 and others are on exercise 2, that’s probably <em>not</em> a good collaboration.</li>
<li>Don’t rush. You won’t hand anything in and can finish up outside of class.</li>
</ul></li>
</ul>
</section>
<section id="questions" class="slide level2 smaller unnumbered scrollable">
<h2>Questions</h2>
<!--
**We'll work through the first three exercises as a class.**
-->
<p>Capital Bikeshare provides a bike-sharing service in the Washington DC area. Customers can pick up and drop off bikes at any station around the city. Of primary interest to the company is:</p>
<p><strong>How many registered riders can we expect today?</strong></p>
<p>To this end, you will build, evaluate, and compare 2 different <strong>linear regression models</strong> of ridership using the following Capital Bikeshare dataset (originally from the UCI Machine Learning Repository):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href=""></a><span class="co"># Load packages we'll need to wrangle and plot the data</span></span>
<span id="cb12-2"><a href=""></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb12-3"><a href=""></a></span>
<span id="cb12-4"><a href=""></a><span class="co"># Load the data</span></span>
<span id="cb12-5"><a href=""></a>bikes <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://mac-stat.github.io/data/bike_share.csv"</span>)</span>
<span id="cb12-6"><a href=""></a></span>
<span id="cb12-7"><a href=""></a><span class="co"># Only keep / select some variables</span></span>
<span id="cb12-8"><a href=""></a><span class="co"># And round some variables (just for our demo purposes)</span></span>
<span id="cb12-9"><a href=""></a>bikes <span class="ot">&lt;-</span> bikes <span class="sc">%&gt;%</span> </span>
<span id="cb12-10"><a href=""></a>  <span class="fu">rename</span>(<span class="at">rides =</span> riders_registered, <span class="at">temp =</span> temp_feel) <span class="sc">%&gt;%</span> </span>
<span id="cb12-11"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">windspeed =</span> <span class="fu">round</span>(windspeed), <span class="at">temp =</span> <span class="fu">round</span>(temp)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-12"><a href=""></a>  <span class="fu">select</span>(rides, windspeed, temp, weekend)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href=""></a><span class="co"># Check out the dimensions</span></span>
<span id="cb13-2"><a href=""></a><span class="fu">dim</span>(bikes)</span>
<span id="cb13-3"><a href=""></a></span>
<span id="cb13-4"><a href=""></a><span class="co"># Check out the first 3 rows</span></span>
<span id="cb13-5"><a href=""></a><span class="fu">head</span>(bikes, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This dataset contains the following information for a sample of different dates:</p>
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">variable</th>
<th style="text-align: left;">description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">rides</td>
<td style="text-align: left;">count of daily rides by registered users</td>
</tr>
<tr class="even">
<td style="text-align: left;">windspeed</td>
<td style="text-align: left;">wind speed in miles per hour</td>
</tr>
<tr class="odd">
<td style="text-align: left;">temp</td>
<td style="text-align: left;">what the temperature feels like in degrees Fahrenheit</td>
</tr>
<tr class="even">
<td style="text-align: left;">weekend</td>
<td style="text-align: left;">whether or not it falls on a weekend</td>
</tr>
</tbody>
</table>
<p><br> We’ll consider two linear regression models of ridership:</p>
<p><code>rides ~ windspeed + temp</code> and <code>rides ~ windspeed + temp + weekend</code></p>
<p><br></p>
<ol type="1">
<li><strong>Plot the relationships.</strong> First, let’s <em>plot</em> these relationships. <em>REMINDER: Don’t write in any chunk with starter code. Copy, paste, and modify the code in the chunk below it.</em></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href=""></a><span class="co"># Start small: rides vs temp</span></span>
<span id="cb14-2"><a href=""></a><span class="fu">ggplot</span>(___, <span class="fu">aes</span>(<span class="at">y =</span> ___, <span class="at">x =</span> ___)) <span class="sc">+</span> </span>
<span id="cb14-3"><a href=""></a>  <span class="fu">geom___</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href=""></a><span class="co"># rides vs temp &amp; windspeed</span></span>
<span id="cb15-2"><a href=""></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">y =</span> ___, <span class="at">x =</span> ___, <span class="at">___ =</span> windspeed)) <span class="sc">+</span> </span>
<span id="cb15-3"><a href=""></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href=""></a><span class="co"># rides vs temp &amp; windspeed &amp; weekend</span></span>
<span id="cb16-2"><a href=""></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">y =</span> ___, <span class="at">x =</span> ___, <span class="at">___ =</span> windspeed)) <span class="sc">+</span> </span>
<span id="cb16-3"><a href=""></a>  <span class="fu">geom_point</span>() <span class="sc">+</span>  </span>
<span id="cb16-4"><a href=""></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> ___)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<details>
<summary>
Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href=""></a><span class="co"># Start small: rides vs temp</span></span>
<span id="cb17-2"><a href=""></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">y =</span> rides, <span class="at">x =</span> temp)) <span class="sc">+</span> </span>
<span id="cb17-3"><a href=""></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L02-evaluating-regression-models_files/figure-revealjs/q1-solution-1.png" width="960"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href=""></a><span class="co"># rides vs temp &amp; windspeed</span></span>
<span id="cb18-2"><a href=""></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">y =</span> rides, <span class="at">x =</span> temp, <span class="at">color =</span> windspeed)) <span class="sc">+</span> </span>
<span id="cb18-3"><a href=""></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L02-evaluating-regression-models_files/figure-revealjs/q1-solution-2.png" width="960"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href=""></a><span class="co"># rides vs temp &amp; windspeed &amp; weekend</span></span>
<span id="cb19-2"><a href=""></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">y =</span> rides, <span class="at">x =</span> temp, <span class="at">color =</span> windspeed)) <span class="sc">+</span> </span>
<span id="cb19-3"><a href=""></a>  <span class="fu">geom_point</span>() <span class="sc">+</span>  </span>
<span id="cb19-4"><a href=""></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> weekend)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L02-evaluating-regression-models_files/figure-revealjs/q1-solution-3.png" width="960"></p>
</figure>
</div>
</div>
</div>
</details>
<p><br></p>
<ol start="2" type="1">
<li><strong>tidymodels STEP 1: model specification.</strong> We’ll build and evaluate our two models of ridership using the <strong>tidymodels</strong> package. This code is more complicated than the <code>lm()</code>function we used in STAT 155. BUT:</li>
</ol>
<ul>
<li><strong>tidymodels</strong> is part of the broader <strong>tidyverse</strong> (what we use to plot and wrangle data), thus the syntax is more consistent</li>
<li><strong>tidymodels</strong> generalizes to the other ML algorithms we’ll survey in this course, thus will eventually <em>minimize</em> the unique syntax we need to learn</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href=""></a><span class="co"># Load package</span></span>
<span id="cb20-2"><a href=""></a><span class="fu">library</span>(tidymodels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The first step is to <strong>specify what type of model we want to build</strong>. We’ll store this as <code>lm_spec</code>, our linear regression model (<code>lm</code>) specification (<code>spec</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href=""></a>lm_spec <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span>   <span class="co"># we want a linear regression model</span></span>
<span id="cb21-2"><a href=""></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) <span class="sc">%&gt;%</span>  <span class="co"># this is a regression task (y is quantitative)</span></span>
<span id="cb21-3"><a href=""></a>  <span class="fu">set_engine</span>(<span class="st">"lm"</span>)<span class="co"># we'll estimate the model using the lm function</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This code <em>specifies</em> but doesn’t <em>build</em> any model – we didn’t even give it any data or specify the variables of interest!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href=""></a><span class="co"># Check it out</span></span>
<span id="cb22-2"><a href=""></a>lm_spec</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<details>
<summary>
Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href=""></a><span class="co"># Load package</span></span>
<span id="cb23-2"><a href=""></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb23-3"><a href=""></a></span>
<span id="cb23-4"><a href=""></a>lm_spec <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span> <span class="co"># we want a linear regression model</span></span>
<span id="cb23-5"><a href=""></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>) <span class="sc">%&gt;%</span>  <span class="co"># this is a regression task (y is quantitative)</span></span>
<span id="cb23-6"><a href=""></a>  <span class="fu">set_engine</span>(<span class="st">"lm"</span>)<span class="co"># we'll estimate the model using the lm function</span></span>
<span id="cb23-7"><a href=""></a></span>
<span id="cb23-8"><a href=""></a>lm_spec</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Linear Regression Model Specification (regression)

Computational engine: lm </code></pre>
</div>
</div>
</details>
<p><br></p>
<ol start="3" type="1">
<li><strong>tidymodels STEP 2: model estimation.</strong> We can now estimate or <code>fit</code> our two ridership models using the specified model structure (<code>lm_spec</code>) and our sample <code>bikes</code> data:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href=""></a><span class="co"># Fit bike_model_1</span></span>
<span id="cb25-2"><a href=""></a>bike_model_1 <span class="ot">&lt;-</span> lm_spec <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href=""></a>  <span class="fu">fit</span>(rides <span class="sc">~</span> windspeed <span class="sc">+</span> temp, <span class="at">data =</span> bikes)</span>
<span id="cb25-4"><a href=""></a></span>
<span id="cb25-5"><a href=""></a><span class="co"># Check out the coefficients</span></span>
<span id="cb25-6"><a href=""></a>bike_model_1 <span class="sc">%&gt;%</span> </span>
<span id="cb25-7"><a href=""></a>  <span class="fu">tidy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href=""></a><span class="co"># YOUR TURN</span></span>
<span id="cb26-2"><a href=""></a><span class="co"># Fit bike_model_2 &amp; check out the coefficients</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<details>
<summary>
Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href=""></a>bike_model_1 <span class="ot">&lt;-</span> lm_spec <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href=""></a>  <span class="fu">fit</span>(rides <span class="sc">~</span> windspeed <span class="sc">+</span> temp, <span class="at">data =</span> bikes)</span>
<span id="cb27-3"><a href=""></a></span>
<span id="cb27-4"><a href=""></a>bike_model_2 <span class="ot">&lt;-</span> lm_spec <span class="sc">%&gt;%</span> </span>
<span id="cb27-5"><a href=""></a>  <span class="fu">fit</span>(rides <span class="sc">~</span> windspeed <span class="sc">+</span> temp <span class="sc">+</span> weekend, <span class="at">data =</span> bikes)</span>
<span id="cb27-6"><a href=""></a></span>
<span id="cb27-7"><a href=""></a><span class="co"># Check out the results:</span></span>
<span id="cb27-8"><a href=""></a>bike_model_1 <span class="sc">%&gt;%</span> </span>
<span id="cb27-9"><a href=""></a>  <span class="fu">tidy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 5
  term        estimate std.error statistic  p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)    -20.8    300.     -0.0694 9.45e- 1
2 windspeed      -36.1      9.42   -3.83   1.37e- 4
3 temp            55.4      3.33   16.6    7.58e-53</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href=""></a>bike_model_2 <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href=""></a>  <span class="fu">tidy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
  term        estimate std.error statistic  p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)    298.     289.        1.03 3.02e- 1
2 windspeed      -35.6      9.00     -3.95 8.46e- 5
3 temp            54.3      3.18     17.1  3.82e-55
4 weekendTRUE   -858.     101.       -8.46 1.47e-16</code></pre>
</div>
</div>
</details>
<p><br></p>
<!--
. . .
-->
<ol start="4" type="1">
<li><strong>Is it fair?</strong> Now, let’s <em>evaluate</em> our two models. First, do you have any concerns about the context in which the data were collected and analyzed? About the potential impact of this analysis?</li>
</ol>
<details>
<summary>
Solution
</summary>
<p>What do you think?</p>
<ul>
<li>Who might be harmed?</li>
<li>Who benefits?</li>
</ul>
</details>
<p><br></p>
<ol start="5" type="1">
<li><strong>Is it strong?</strong> We can measure and compare the strength of these models using <span class="math inline">\(R^2\)</span>, <em>the proportion of variability in our response variable that’s explained by the model</em>. Report which model is stronger and interpret its <span class="math inline">\(R^2\)</span>.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href=""></a><span class="co"># Obtain R^2 for bike_model_1</span></span>
<span id="cb31-2"><a href=""></a>bike_model_1 <span class="sc">%&gt;%</span> </span>
<span id="cb31-3"><a href=""></a>  <span class="fu">glance</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href=""></a><span class="co"># YOUR TURN</span></span>
<span id="cb32-2"><a href=""></a><span class="co"># Obtain R^2 for bike_model_2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<details>
<summary>
Solution
</summary>
<p>Model 2 is stronger than model 1 (<span class="math inline">\(R^2\)</span> of 0.372 vs 0.310). But it only explains 37% of the variability in ridership from day to day.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href=""></a><span class="co"># Obtain R^2 for bike_model_1</span></span>
<span id="cb33-2"><a href=""></a>bike_model_1 <span class="sc">%&gt;%</span> </span>
<span id="cb33-3"><a href=""></a>  <span class="fu">glance</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 12
  r.squared adj.r.squared sigma statistic  p.value    df logLik    AIC    BIC
      &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1     0.310         0.308 1298.      163. 2.44e-59     2 -6276. 12560. 12578.
# ℹ 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href=""></a>bike_model_2 <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href=""></a>  <span class="fu">glance</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 12
  r.squared adj.r.squared sigma statistic  p.value    df logLik    AIC    BIC
      &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1     0.372         0.369 1239.      143. 5.82e-73     3 -6242. 12493. 12516.
# ℹ 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;</code></pre>
</div>
</div>
</details>
<p><br></p>
<ol start="6" type="1">
<li><strong>Pause: get the residuals and predictions.</strong> Our next model evaluation questions will focus on the models’ predictions and prediction <em>errors</em>, or <em>residuals</em>. We can obtain this information by <em>augmenting</em> our models with our original <code>bikes</code> data. For example:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href=""></a><span class="co"># Calculate predicted ridership (.pred) &amp; corresponding residuals (.resid) using bike_model_1</span></span>
<span id="cb37-2"><a href=""></a><span class="co"># Just look at first 6 days</span></span>
<span id="cb37-3"><a href=""></a>bike_model_1 <span class="sc">%&gt;%</span> </span>
<span id="cb37-4"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> bikes) <span class="sc">%&gt;%</span> </span>
<span id="cb37-5"><a href=""></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can also predict outcomes for <em>new</em> observations using either <code>augment()</code> or <code>predict()</code>. Note the difference in the output:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href=""></a><span class="co"># Predict ridership on a 60 degree day with 20 mph winds</span></span>
<span id="cb38-2"><a href=""></a>bike_model_1 <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> <span class="fu">data.frame</span>(<span class="at">windspeed =</span> <span class="dv">20</span>, <span class="at">temp =</span> <span class="dv">60</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href=""></a><span class="co"># Predict ridership on a 60 degree day with 20 mph winds</span></span>
<span id="cb39-2"><a href=""></a>bike_model_1 <span class="sc">%&gt;%</span> </span>
<span id="cb39-3"><a href=""></a>  <span class="fu">predict</span>(<span class="at">new_data =</span> <span class="fu">data.frame</span>(<span class="at">windspeed =</span> <span class="dv">20</span>, <span class="at">temp =</span> <span class="dv">60</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<details>
<summary>
Solution
</summary>
<p><code>augment()</code> gives the predictions and residuals for all rows in the data. <code>predict()</code> only gives you predictions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href=""></a><span class="co"># Obtain the predictions &amp; residuals using bike_model_1</span></span>
<span id="cb40-2"><a href=""></a>bike_model_1 <span class="sc">%&gt;%</span> </span>
<span id="cb40-3"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> bikes) <span class="sc">%&gt;%</span> </span>
<span id="cb40-4"><a href=""></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  .pred .resid rides windspeed  temp weekend
  &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  
1 3183. -2529.   654        11    65 TRUE   
2 2911. -2241.   670        17    64 TRUE   
3 2080.  -851.  1229        17    49 FALSE  
4 2407.  -953.  1454        11    51 FALSE  
5 2446.  -928.  1518        13    53 FALSE  
6 2699. -1181.  1518         6    53 FALSE  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href=""></a><span class="co"># Predict ridership on a 60 degree day with 20 mph winds</span></span>
<span id="cb42-2"><a href=""></a>bike_model_1 <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> <span class="fu">data.frame</span>(<span class="at">windspeed =</span> <span class="dv">20</span>, <span class="at">temp =</span> <span class="dv">60</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .pred windspeed  temp
  &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;
1 2581.        20    60</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href=""></a><span class="co"># Predict ridership on a 60 degree day with 20 mph winds</span></span>
<span id="cb44-2"><a href=""></a>bike_model_1 <span class="sc">%&gt;%</span> </span>
<span id="cb44-3"><a href=""></a>  <span class="fu">predict</span>(<span class="at">new_data =</span> <span class="fu">data.frame</span>(<span class="at">windspeed =</span> <span class="dv">20</span>, <span class="at">temp =</span> <span class="dv">60</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  .pred
  &lt;dbl&gt;
1 2581.</code></pre>
</div>
</div>
</details>
<p><br></p>
<ol start="7" type="1">
<li><strong>Does it produce accurate predictions?</strong> Recall that the <strong>mean absolute error</strong> (MAE) measures the typical prediction error. Specifically, it is the <em>mean</em> of the <em>absolute</em> values of the residual <em>errors</em> for the days in our dataset.</li>
</ol>
<ol type="a">
<li>Use the residuals to calculate the MAE for the 2 models. HINT: <code>abs()</code>.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href=""></a><span class="co"># MAE for bike_model_1</span></span>
<span id="cb46-2"><a href=""></a>bike_model_1 <span class="sc">%&gt;%</span> </span>
<span id="cb46-3"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> bikes) <span class="sc">%&gt;%</span> </span>
<span id="cb46-4"><a href=""></a>  <span class="fu">summarize</span>(<span class="at">mae =</span> <span class="fu">___</span>(<span class="fu">___</span>(___)))</span>
<span id="cb46-5"><a href=""></a></span>
<span id="cb46-6"><a href=""></a><span class="co"># MAE for bike_model_2</span></span>
<span id="cb46-7"><a href=""></a>bike_model_2 <span class="sc">%&gt;%</span> </span>
<span id="cb46-8"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> bikes) <span class="sc">%&gt;%</span> </span>
<span id="cb46-9"><a href=""></a>  <span class="fu">summarize</span>(<span class="at">mae =</span> <span class="fu">___</span>(<span class="fu">___</span>(___)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="a">
<li>Doing the calculation from scratch helps solidify your understanding of how MAE is calculated, thus interpreted. Check your calculations using a shortcut function.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href=""></a><span class="co"># Calculate MAE for the first model</span></span>
<span id="cb47-2"><a href=""></a>bike_model_1 <span class="sc">%&gt;%</span> </span>
<span id="cb47-3"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> bikes) <span class="sc">%&gt;%</span> </span>
<span id="cb47-4"><a href=""></a>  <span class="fu">mae</span>(<span class="at">truth =</span> rides, <span class="at">estimate =</span> .pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href=""></a><span class="co"># YOUR TURN</span></span>
<span id="cb48-2"><a href=""></a><span class="co"># Calculate MAE for the second model</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="3" type="a">
<li>Which model has more accurate predictions? Interpret the MAE for this model and comment on whether it’s “large” or “small”. NOTE: “large” or “small” is defined by the context (e.g.&nbsp;relative to the observed range of ridership, the consequences of a bad prediction, etc).</li>
</ol>
<details>
<summary>
Solution
</summary>
<p>On average, the model 1 predictions are off by ~1080 riders and the model 2 predictions are off by ~1038 riders. Is this a lot? Consider this error relative to the scale of the data: there are roughly 1000 - 7000 riders per day.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href=""></a><span class="co"># a</span></span>
<span id="cb49-2"><a href=""></a>bike_model_1 <span class="sc">%&gt;%</span> </span>
<span id="cb49-3"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> bikes) <span class="sc">%&gt;%</span> </span>
<span id="cb49-4"><a href=""></a>  <span class="fu">summarize</span>(<span class="at">mae =</span> <span class="fu">mean</span>(<span class="fu">abs</span>(.resid)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
    mae
  &lt;dbl&gt;
1 1080.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href=""></a>bike_model_2 <span class="sc">%&gt;%</span> </span>
<span id="cb51-2"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> bikes) <span class="sc">%&gt;%</span> </span>
<span id="cb51-3"><a href=""></a>  <span class="fu">summarize</span>(<span class="at">mae =</span> <span class="fu">mean</span>(<span class="fu">abs</span>(.resid)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
    mae
  &lt;dbl&gt;
1 1038.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href=""></a><span class="co"># b</span></span>
<span id="cb53-2"><a href=""></a>bike_model_1 <span class="sc">%&gt;%</span> </span>
<span id="cb53-3"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> bikes) <span class="sc">%&gt;%</span> </span>
<span id="cb53-4"><a href=""></a>  <span class="fu">mae</span>(<span class="at">truth =</span> rides, <span class="at">estimate =</span> .pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 mae     standard       1080.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href=""></a>bike_model_2 <span class="sc">%&gt;%</span> </span>
<span id="cb55-2"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> bikes) <span class="sc">%&gt;%</span> </span>
<span id="cb55-3"><a href=""></a>  <span class="fu">mae</span>(<span class="at">truth =</span> rides, <span class="at">estimate =</span> .pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 mae     standard       1038.</code></pre>
</div>
</div>
</details>
<p><br></p>
<ol start="8" type="1">
<li><strong>Is it wrong?</strong> To determine whether the linear regression assumptions behind <code>bike_model_1</code> and <code>bike_model_2</code> are reasonable, we can review residual plots, i.e.&nbsp;plots of the residuals vs predictions for each observation in our dataset. Run the code below and summarize your assessment of whether our models are wrong. RECALL: We want the appoints to appear <em>random</em> and <em>centered around 0</em> across the entire range of the model / predictions.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href=""></a><span class="co"># Residual plot for bike_model_1</span></span>
<span id="cb57-2"><a href=""></a>bike_model_1 <span class="sc">%&gt;%</span> </span>
<span id="cb57-3"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> bikes) <span class="sc">%&gt;%</span> </span>
<span id="cb57-4"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .pred, <span class="at">y =</span> .resid)) <span class="sc">+</span> </span>
<span id="cb57-5"><a href=""></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb57-6"><a href=""></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href=""></a><span class="co"># YOUR TURN</span></span>
<span id="cb58-2"><a href=""></a><span class="co"># Residual plot for bike_model_2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<details>
<summary>
Solution
</summary>
<p>Both models look roughly “right” BUT there is a little downward slope at the extreme end of the residual plots. This corresponds to the observed phenomenon that when it’s really hot, ridership starts dipping. In a future model, we might incorporate a quadratic temperature term.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href=""></a><span class="co"># Residual plot for bike_model_1</span></span>
<span id="cb59-2"><a href=""></a>bike_model_1 <span class="sc">%&gt;%</span> </span>
<span id="cb59-3"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> bikes) <span class="sc">%&gt;%</span> </span>
<span id="cb59-4"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .pred, <span class="at">y =</span> .resid)) <span class="sc">+</span> </span>
<span id="cb59-5"><a href=""></a><span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb59-6"><a href=""></a><span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L02-evaluating-regression-models_files/figure-revealjs/q8-solution-1.png" width="960"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href=""></a><span class="co"># Residual plot for bike_model_2</span></span>
<span id="cb60-2"><a href=""></a>bike_model_2 <span class="sc">%&gt;%</span> </span>
<span id="cb60-3"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> bikes) <span class="sc">%&gt;%</span> </span>
<span id="cb60-4"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .pred, <span class="at">y =</span> .resid)) <span class="sc">+</span> </span>
<span id="cb60-5"><a href=""></a><span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb60-6"><a href=""></a><span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L02-evaluating-regression-models_files/figure-revealjs/q8-solution-2.png" width="960"></p>
</figure>
</div>
</div>
</div>
</details>
<p><br></p>
<ol start="9" type="1">
<li><strong>Art vs science</strong> Inspecting residual plots is more art than science.<sup>1</sup> It requires a lot of practice. Consider another example using simulated data. First, build a model that assumes all predictors are roughly linearly related:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href=""></a><span class="co"># Import data</span></span>
<span id="cb61-2"><a href=""></a>simulated_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://ajohns24.github.io/data/simulated_data.csv"</span>)</span>
<span id="cb61-3"><a href=""></a></span>
<span id="cb61-4"><a href=""></a><span class="co"># Model y by the 6 input variables</span></span>
<span id="cb61-5"><a href=""></a>new_model <span class="ot">&lt;-</span> lm_spec <span class="sc">%&gt;%</span> </span>
<span id="cb61-6"><a href=""></a>  <span class="fu">fit</span>(y <span class="sc">~</span> x1 <span class="sc">+</span> x2 <span class="sc">+</span> x3 <span class="sc">+</span> x4 <span class="sc">+</span> x5 <span class="sc">+</span> x6, simulated_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next, check out a pairs plot. Is there anything here that makes you think that our model assumption is bad?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href=""></a><span class="fu">library</span>(GGally)</span>
<span id="cb62-2"><a href=""></a><span class="fu">ggpairs</span>(simulated_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L02-evaluating-regression-models_files/figure-revealjs/unnamed-chunk-12-1.png" width="480"></p>
</figure>
</div>
</div>
</div>
<p>Finally, check out a residual plot. Any concerns now?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href=""></a>new_model <span class="sc">%&gt;%</span> </span>
<span id="cb63-2"><a href=""></a>  <span class="fu">___</span>(<span class="at">new_data =</span> ___) <span class="sc">%&gt;%</span> </span>
<span id="cb63-3"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> ___, <span class="at">y =</span> ___)) <span class="sc">+</span> </span>
<span id="cb63-4"><a href=""></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.1</span>) <span class="sc">+</span> </span>
<span id="cb63-5"><a href=""></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<details>
<summary>
Solution
</summary>
<p>Art + Science!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href=""></a>new_model <span class="sc">%&gt;%</span> </span>
<span id="cb64-2"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> simulated_data) <span class="sc">%&gt;%</span> </span>
<span id="cb64-3"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> .pred, <span class="at">y =</span> .resid)) <span class="sc">+</span> </span>
<span id="cb64-4"><a href=""></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.1</span>) <span class="sc">+</span> </span>
<span id="cb64-5"><a href=""></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L02-evaluating-regression-models_files/figure-revealjs/q9-solution-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</details>
<p><br></p>
<ol start="10" type="1">
<li><strong>Details: communication &amp; code style</strong> Communication is a key machine learning skill, including written summaries, presentations, and <strong>code</strong>. Just like an essay, code must have structure, signposts, and grammar that will make it easier for others to follow. The below code runs, but it is “bad code”.</li>
</ol>
<ul>
<li>Fix this code and add <strong>comments</strong> so that it is easier for yourself and others to follow.</li>
<li>Also pay attention to what this code <em>does</em>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href=""></a>bikes<span class="sc">%&gt;%</span><span class="fu">group_by</span>(weekend)<span class="sc">%&gt;%</span><span class="fu">summarize</span>(<span class="fu">median</span>(rides))</span>
<span id="cb65-2"><a href=""></a></span>
<span id="cb65-3"><a href=""></a>mynewdatasetissmallerthantheoriginal<span class="ot">&lt;-</span>bikes<span class="sc">%&gt;%</span><span class="fu">filter</span>(rides<span class="sc">&lt;=</span><span class="dv">700</span>,weekend<span class="sc">==</span><span class="cn">FALSE</span>,temp<span class="sc">&gt;</span><span class="dv">60</span>)</span>
<span id="cb65-4"><a href=""></a>mynewdatasetissmallerthantheoriginal</span>
<span id="cb65-5"><a href=""></a></span>
<span id="cb65-6"><a href=""></a>mynewdatasetusescelsius<span class="ot">&lt;-</span>bikes<span class="sc">%&gt;%</span><span class="fu">mutate</span>(<span class="at">temp=</span>(temp<span class="dv">-32</span>)<span class="sc">*</span><span class="dv">5</span><span class="sc">/</span><span class="dv">9</span>)</span>
<span id="cb65-7"><a href=""></a><span class="fu">head</span>(mynewdatasetusescelsius)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<details>
<summary>
Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href=""></a><span class="co"># Calculate the median ridership by weekend</span></span>
<span id="cb66-2"><a href=""></a><span class="co"># Put each new thought or action on its own line! </span></span>
<span id="cb66-3"><a href=""></a><span class="co"># This makes it easier to follow the steps.</span></span>
<span id="cb66-4"><a href=""></a>bikes <span class="sc">%&gt;%</span> </span>
<span id="cb66-5"><a href=""></a>  <span class="fu">group_by</span>(weekend) <span class="sc">%&gt;%</span> </span>
<span id="cb66-6"><a href=""></a>  <span class="fu">summarize</span>(<span class="fu">median</span>(rides))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  weekend `median(rides)`
  &lt;lgl&gt;             &lt;dbl&gt;
1 FALSE              3848
2 TRUE               2955</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href=""></a><span class="co"># Obtain days on which there are at most 700 rides,</span></span>
<span id="cb68-2"><a href=""></a><span class="co"># it's the weekend, and temps are above 60 degrees</span></span>
<span id="cb68-3"><a href=""></a><span class="co"># Use a shorter name that's easier to read and type.</span></span>
<span id="cb68-4"><a href=""></a><span class="co"># Add spaces to make things easier to read.</span></span>
<span id="cb68-5"><a href=""></a><span class="co"># Add line breaks to make it easier to follow the steps.</span></span>
<span id="cb68-6"><a href=""></a>warm_weekends <span class="ot">&lt;-</span> bikes <span class="sc">%&gt;%</span></span>
<span id="cb68-7"><a href=""></a>  <span class="fu">filter</span>(rides <span class="sc">&lt;=</span> <span class="dv">700</span>, weekend <span class="sc">==</span> <span class="cn">FALSE</span>, temp <span class="sc">&gt;</span> <span class="dv">60</span>)</span>
<span id="cb68-8"><a href=""></a>warm_weekends</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  rides windspeed temp weekend
1   577        18   67   FALSE
2   655        18   68   FALSE
3    20        24   72   FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href=""></a><span class="co"># Store temp in Celsius</span></span>
<span id="cb70-2"><a href=""></a>bikes_celsius <span class="ot">&lt;-</span> bikes <span class="sc">%&gt;%</span> </span>
<span id="cb70-3"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">temp =</span> (temp <span class="sc">-</span> <span class="dv">32</span>)<span class="sc">*</span><span class="dv">5</span><span class="sc">/</span><span class="dv">9</span>)</span>
<span id="cb70-4"><a href=""></a><span class="fu">head</span>(bikes_celsius)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  rides windspeed      temp weekend
1   654        11 18.333333    TRUE
2   670        17 17.777778    TRUE
3  1229        17  9.444444   FALSE
4  1454        11 10.555556   FALSE
5  1518        13 11.666667   FALSE
6  1518         6 11.666667   FALSE</code></pre>
</div>
</div>
</details>
<p><br></p>
<ol start="11" type="1">
<li><strong>STAT 155 Review: model interpretation &amp; application</strong> Let’s <em>interpret</em> and <em>apply</em> <code>bike_model_2</code>.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href=""></a>___ <span class="sc">%&gt;%</span> </span>
<span id="cb72-2"><a href=""></a>  <span class="fu">tidy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="a">
<li>How can we interpret the <code>temp</code> coefficient?</li>
</ol>
<ul>
<li>We expect roughly 54 more riders on warm days.</li>
<li>We expect roughly 54 more riders per every 1 degree increase in temperature.</li>
<li>When controlling for windspeed and weekend status, we expect roughly 54 more riders on warm days.</li>
<li>When controlling for windspeed and weekend status, we expect roughly 54 more riders per every 1 degree increase in temperature.</li>
</ul>
<ol start="2" type="a">
<li>How can we interpret the <code>weekendTRUE</code> coefficient?</li>
</ol>
<ul>
<li>We expect roughly 858 fewer riders on weekends.</li>
<li>We expect roughly 858 fewer riders per every extra weekend.</li>
<li>When controlling for windspeed and temperature, we expect roughly 858 fewer riders on weekends.</li>
<li>When controlling for windspeed and temperature, we expect roughly 858 fewer riders per every extra weekend.</li>
</ul>
<ol start="3" type="a">
<li>Reproduce the predicted ridership and corresponding residual for day 1 from scratch (how were these calculated?!):</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href=""></a>bike_model_2 <span class="sc">%&gt;%</span> </span>
<span id="cb73-2"><a href=""></a>  <span class="fu">___</span>(<span class="at">new_data =</span> bikes) <span class="sc">%&gt;%</span> </span>
<span id="cb73-3"><a href=""></a>  <span class="fu">head</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<details>
<summary>
Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href=""></a><span class="co"># Get the coefficients</span></span>
<span id="cb74-2"><a href=""></a>bike_model_2 <span class="sc">%&gt;%</span> </span>
<span id="cb74-3"><a href=""></a>  <span class="fu">tidy</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 5
  term        estimate std.error statistic  p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)    298.     289.        1.03 3.02e- 1
2 windspeed      -35.6      9.00     -3.95 8.46e- 5
3 temp            54.3      3.18     17.1  3.82e-55
4 weekendTRUE   -858.     101.       -8.46 1.47e-16</code></pre>
</div>
</div>
<ol type="a">
<li>When controlling for windspeed and weekend status, we expect roughly 54 more riders per every 1 degree increase in temperature.</li>
<li>When controlling for windspeed and temperature, we expect roughly 858 fewer riders on weekends (compared to weekdays).</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href=""></a><span class="co"># Predict ridership on day 1</span></span>
<span id="cb76-2"><a href=""></a>bike_model_2 <span class="sc">%&gt;%</span> </span>
<span id="cb76-3"><a href=""></a>  <span class="fu">augment</span>(<span class="at">new_data =</span> bikes) <span class="sc">%&gt;%</span> </span>
<span id="cb76-4"><a href=""></a>  <span class="fu">head</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 6
  .pred .resid rides windspeed  temp weekend
  &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  
1 2581. -1927.   654        11    65 TRUE   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href=""></a><span class="co"># This matches .pred</span></span>
<span id="cb78-2"><a href=""></a><span class="fl">298.45</span> <span class="sc">-</span> <span class="fl">35.57</span><span class="sc">*</span><span class="dv">11</span> <span class="sc">+</span> <span class="fl">54.33</span><span class="sc">*</span><span class="dv">65</span> <span class="sc">-</span> <span class="fl">857.76</span><span class="sc">*</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2580.87</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href=""></a><span class="co"># Calculate the residual (observed - predicted)</span></span>
<span id="cb80-2"><a href=""></a><span class="co"># This matches .resid</span></span>
<span id="cb80-3"><a href=""></a><span class="dv">654</span> <span class="sc">-</span> <span class="fl">2580.87</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -1926.87</code></pre>
</div>
</div>
</details>
<p><br></p>
<ol start="12" type="1">
<li><strong>STAT 155 Review: data wrangling</strong> Through the “Details: communication &amp; code style” and elsewhere, you’ve reviewed the use of various <code>dplyr</code> data wrangling verbs: <code>filter()</code>, <code>mutate()</code>, <code>summarize()</code>, <code>group_by()</code>, and <code>select()</code>. Use these to complete the following tasks.</li>
</ol>
<ol type="a">
<li>Calculate the mean temperature across all days in the data set.</li>
<li>Calculate the mean temperature on weekends vs weekdays.</li>
<li>Print out the 3 days with the <em>highest</em> temperatures. HINT: <code>arrange()</code> or <code>arrange(desc())</code></li>
<li>Name and store a new data set which: - only includes the days that fall on a weekend <em>and</em> have temps below 80 degrees - has a new variable, <code>temp_above_freezing</code>, which calculates how far the temperature is above (or below) freezing (32 degrees F) - only includes the <code>windspeed</code>, <code>temp</code>, and <code>temp_above_freezing</code> variables.</li>
</ol>
<details>
<summary>
Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href=""></a><span class="co"># a</span></span>
<span id="cb82-2"><a href=""></a>bikes <span class="sc">%&gt;%</span> </span>
<span id="cb82-3"><a href=""></a>  <span class="fu">summarize</span>(<span class="fu">mean</span>(temp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  mean(temp)
1   74.69083</code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href=""></a><span class="co"># b</span></span>
<span id="cb84-2"><a href=""></a>bikes <span class="sc">%&gt;%</span> </span>
<span id="cb84-3"><a href=""></a>  <span class="fu">group_by</span>(weekend) <span class="sc">%&gt;%</span> </span>
<span id="cb84-4"><a href=""></a>  <span class="fu">summarize</span>(<span class="fu">mean</span>(temp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  weekend `mean(temp)`
  &lt;lgl&gt;          &lt;dbl&gt;
1 FALSE           75.1
2 TRUE            73.7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href=""></a><span class="co"># c</span></span>
<span id="cb86-2"><a href=""></a>bikes <span class="sc">%&gt;%</span> </span>
<span id="cb86-3"><a href=""></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(temp)) <span class="sc">%&gt;%</span> </span>
<span id="cb86-4"><a href=""></a>  <span class="fu">head</span>(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  rides windspeed temp weekend
1  2825         9  108   FALSE
2  3152        15  106   FALSE
3  2298         9  104    TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href=""></a><span class="co"># d</span></span>
<span id="cb88-2"><a href=""></a>new_data <span class="ot">&lt;-</span> bikes <span class="sc">%&gt;%</span> </span>
<span id="cb88-3"><a href=""></a>  <span class="fu">filter</span>(weekend <span class="sc">==</span> <span class="cn">TRUE</span>, temp <span class="sc">&lt;</span> <span class="dv">80</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb88-4"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">temp_above_freezing =</span> temp <span class="sc">-</span> <span class="dv">32</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb88-5"><a href=""></a>  <span class="fu">select</span>(windspeed, temp, temp_above_freezing)</span>
<span id="cb88-6"><a href=""></a><span class="fu">head</span>(new_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  windspeed temp temp_above_freezing
1        11   65                  33
2        17   64                  32
3        18   47                  15
4        24   42                  10
5        11   54                  22
6        13   53                  21</code></pre>
</div>
</div>
</details>
<p><br></p>
<ol start="13" type="1">
<li><strong>STAT 155 Review: plots</strong><br>
Construct plots of the following relationships:</li>
</ol>
<ol type="a">
<li>rides vs temp</li>
<li>rides vs weekend</li>
<li>rides vs temp and weekend</li>
</ol>
<details>
<summary>
Solution
</summary>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href=""></a><span class="co"># a. rides vs temp</span></span>
<span id="cb90-2"><a href=""></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">y =</span> rides, <span class="at">x =</span> temp)) <span class="sc">+</span> </span>
<span id="cb90-3"><a href=""></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L02-evaluating-regression-models_files/figure-revealjs/unnamed-chunk-14-1.png" width="960"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href=""></a><span class="co"># b. rides vs weekend</span></span>
<span id="cb91-2"><a href=""></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">y =</span> rides, <span class="at">x =</span> weekend)) <span class="sc">+</span> </span>
<span id="cb91-3"><a href=""></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L02-evaluating-regression-models_files/figure-revealjs/unnamed-chunk-14-2.png" width="960"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href=""></a><span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">x =</span> rides, <span class="at">fill =</span> weekend)) <span class="sc">+</span> </span>
<span id="cb92-2"><a href=""></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L02-evaluating-regression-models_files/figure-revealjs/unnamed-chunk-14-3.png" width="960"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href=""></a><span class="co"># c. rides vs temp and weekend</span></span>
<span id="cb93-2"><a href=""></a> <span class="fu">ggplot</span>(bikes, <span class="fu">aes</span>(<span class="at">y =</span> rides, <span class="at">x =</span> temp, <span class="at">color =</span> weekend)) <span class="sc">+</span> </span>
<span id="cb93-3"><a href=""></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="L02-evaluating-regression-models_files/figure-revealjs/unnamed-chunk-14-4.png" width="960"></p>
</figure>
</div>
</div>
</div>
</details>
<p><br></p>
<ol start="14" type="1">
<li><strong>Done!</strong></li>
</ol>
<ul>
<li>Knit/render your notes.</li>
<li>Check the solutions on the course website.</li>
<li>Get a head start on the wrap-up steps below.</li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn1"><p>Stefanski, Leonard A. (2007). Residual (Sur)Realism. “The American Statistician,” 61, pp 163-177.</p></li></ol></aside></section></section>
<section id="wrap-up" class="title-slide slide level1 smaller unnumbered center">
<h1>Wrap-Up</h1>
<ul>
<li><strong>Finishing the activity:</strong>
<ul>
<li>If you didn’t finish the activity, no problem! Be sure to complete the activity outside of class, review the solutions in the online manual, and ask any questions on Slack or in office hours.</li>
<li>Re-organize and review your notes to help deepen your understanding, solidify your learning, and make homework go more smoothly!</li>
</ul></li>
<li>An <strong>R code video</strong>, posted under the pre-course materials for today’s class (see the “Schedule” page on this website), talks through the new <code>tidymodels</code> code. This video is OPTIONAL. Decide what’s right for you.</li>
<li>Set up <strong>Slack</strong> if you haven’t already. I’ll be posting announcements there from now on.</li>
<li><strong>Upcoming due dates:</strong>
<ul>
<li>HW0 (STAT 155 Review): due Friday at 11:59 pm</li>
<li>CP2: due 10 minutes before our next class</li>
</ul></li>
</ul>
<div class="quarto-auto-generated-content">
<p><img src="images/mac.png" class="slide-logo"></p>
<div class="footer footer-default">
<p><a href="https://kegrinde.github.io/stat253_coursenotes" class="uri">https://kegrinde.github.io/stat253_coursenotes</a></p>
</div>
</div>
</section>


    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="L02-evaluating-regression-models_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="L02-evaluating-regression-models_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="L02-evaluating-regression-models_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="L02-evaluating-regression-models_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="L02-evaluating-regression-models_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="L02-evaluating-regression-models_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="L02-evaluating-regression-models_files/libs/revealjs/plugin/multiplex/socket.io.js"></script>
  <script src="L02-evaluating-regression-models_files/libs/revealjs/plugin/multiplex/multiplex.js"></script>
  <script src="L02-evaluating-regression-models_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="L02-evaluating-regression-models_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="L02-evaluating-regression-models_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="L02-evaluating-regression-models_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="L02-evaluating-regression-models_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'multiplex': {"secret":"17259240916395656991","id":"d49003d144fa7c28","url":"https://reveal-multiplex.glitch.me/"},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>